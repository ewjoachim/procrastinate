version: '2.1'
services:
  procrastinate:
    build: .
    volumes:
      - "./:/procrastinate_dev/"
    command: worker
    restart: on-failure
    environment:
      PYTHONPATH: .
      PROCRASTINATE_APP: procrastinate_demo.app.app
      PGDATABASE: procrastinate
      PGHOST: postgres
      PGUSER: postgres
    depends_on:
      - postgres

  postgres:
    image: postgres:10
    ports: ["5432:5432"]
    environment:
        POSTGRES_DB: procrastinate
